<!-- =========================
index.html (fixed: sliders visible, robust init)
========================== -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Tax Waterfall Visualizer · 2025</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<div class="max-w-7xl mx-auto p-4 md:p-6 space-y-6">


<header class="flex items-center justify-between gap-3" style="flex-wrap:wrap">
<div class="space-y-1">
<h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">Tax Waterfall Visualizer · 2025</h1>
<p class="text-sm text-slate-400">Brackets as buckets. Twist the knobs, watch the waterfall, don’t cry.</p>
</div>
<div class="flex items-center gap-2">
<span class="vchip"><span class="legend-dot" style="background:linear-gradient(90deg,#22d3ee,#60a5fa,#a78bfa)"></span>Fill level</span>
<span class="vchip"><span class="legend-dot" style="background:#34d399"></span>Room to next</span>
<span class="vchip"><span class="legend-dot" style="background:#f87171"></span>Cut to drop</span>
</div>
</header>


<!-- TOP ROW -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
<!-- Filing + State compact -->
<div class="card space-y-3 p-4 compact-card">
<div class="grid grid-cols-2 gap-3">
<div>
<label class="label">Filing status</label>
<select id="filingStatus" class="select">
<option value="single">Single</option>
<option value="marriedFilingJointly">Married filing jointly</option>
<option value="headOfHousehold">Head of household</option>
</select>
</div>
<div>
<label class="label">State</label>
<select id="state" class="select"></select>
</div>
</div>
<div class="text-xs text-slate-400">Data year: 2025 federal and state. Federal tables &amp; standard deduction from IRS. State data loaded from <code class="kbd">states_2025.json</code>.</div>
</div>


<div class="card grid grid-cols-2 gap-3">
<div class="metric"><div class="label">Total income</div><div id="mTotalIncome" class="text-xl font-bold">$0</div></div>
<div class="metric"><div class="label">Taxable ordinary</div><div id="mTaxable" class="text-xl font-bold">$0</div></div>
<div class="metric"><div class="label">Federal tax</div><div id="mFed" class="text-xl font-bold">$0</div></div>
<div class="metric"><div class="label">State tax</div><div id="mState" class="text-xl font-bold">$0</div></div>
<div class="metric"><div class="label">Effective total</div><div id="mEff" class="text-xl font-bold">0.0%</div></div>
<div class="metric"><div class="label">Current marginal</div><div id="mMarginal" class="text-xl font-bold">—</div></div>
</div>


<div class="card space-y-2">
<div class="flex gap-2">
<button id="viewFederal" class="btn btn-primary">Federal</button>
<button id="viewState" class="btn">State</button>
<div class="ml-auto flex gap-2">
<button id="lockBtn" class="btn">Lock baseline</button>
<button id="clearLockBtn" class="btn btn-ghost">Clear</button>
</div>
</div>
<div id="lockInfo" class="hidden text-sm text-slate-300">
Baseline locked. Showing Δ vs baseline in chips below.
</div>
<div id="deltaChips" class="flex" style="flex-wrap:wrap;gap:.5rem"></div>
<div class="border-t pt-3" style="border-color:#1e293b">
<div id="savingsChips" class="flex" style="flex-wrap:wrap;gap:.5rem"></div>
</div>
</div>
</div>


<!-- GRID: Inputs + Waterfall -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
<div class="card space-y-5">
<h2 class="text-lg font-semibold">Income &amp; Deferrals</h2>


<div class="space-y-3">
<div class="text-slate-300 font-semibold" id="earner1Label">Earner 1</div>
<div class="grid grid-cols-form gap-2 items-center">
<label>Salary</label>
<div class="field money">
<input id="e1SalaryText" type="text" value="120,000" aria-label="Earner 1 salary">
</html>
